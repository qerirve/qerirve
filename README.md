# lab3

მიზანი: წინა ლაბორატორიაში გაკეთებული რეგისტრაციის ფუნქციონალში ელ. ფოსტის გადამოწმების შესაძლებლობის დამატება.

1. დაწერეთ sql სკრიპტი რომელიც არსებულ ცხრილში (users) დაამატებს ველებს: EmailVerificationToken, ველი უნდა იყოს აუცილებელი, არსებული მონაცემებზე გადააწერეთ რაიმე მნიშვნლობა მაგალითად EmailVerificationToken='token'
2. რეგისტრაციისას მომხმარებლის შექმნისას შეავსეთ EmailVerificationToken-ს მნიშვნელბა guid-ით, მაგალითად დააგენერირეთ uniqid ფუნქციის გამოყენებით
3. რეგისიტრაციის წარმეტებით დასრუელბის შემთხვევაში (ბაზის ცხრილში ჩანაწერის წარმატებულად ჩასმის შემდეგ) მომხმარებლის id შეინახეთ php session-ში, ასევე შეინახეთ რაოდენობა რამდჯერ შეუძლია მომხმარებელს მოითხოვოს მეილის ხელახალი გაგზავნა
4.  გააგზავნეთ მეილი მომხმარებლის მიერ მითითებულ ელ. ფოსტზე phpmailer ბიბლიოთეკის გამოყენებით. აქტივაციის ლინკით, ლინკი უნდა იყოს შემდეგ ფორმატის: http://mywebsite.domain/activate-user.php?token=[თქვენ მიერ დაგენერირებული ტოკენი]
5.  რეგისტრაციის წარმატებით დასრულების შესახებ შეტყობინების გამოტანისას დაამატეთ ღილაკი აქტივაციის ლინკის ხელახალი გაგზავნა. ღილაკზე დაჭერით უნდა მოხდეს resend-email.php სკრიტპის გამოძახება (ajax-ით ან form submit). resend-email.php სკრიპტმა უნდა შეამოწმოს რამდენი ცდა აქვს დარჩენილი მომხმარებელს (სესიიდან) და თუ არ არის 0 ცდა დარჩენილი ხელახლა გააგზავნოს ელ. ფოსტა. თუ მეტი ცდა არ დარჩა უნდა გამოვიდეს შეტყობინება "თქვენ ამოწურეთ ხელახალი გაგზავნის მცდელობის რაოდენონის ლიმიტი"

